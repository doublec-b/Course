import{aA as v,ar as D,r as m,o as N,n as y,w as n,ad as f,p as e,y as s,aE as d,a4 as O,ac as I,z as i}from"./index-62229c44.js";function B(r){return v({url:"api/mobile/elogin",method:"post",data:r})}function E(){return v({url:"/api/teacher/all",method:"get"})}function L(r){return v({url:`/api/teacher/one?id=${r}`,method:"get"})}function S(r){return v({url:`/api/teacher/delete?id=${r}`,method:"get"})}function q(r){return v({url:"/api/teacher/add",method:"post",data:r})}function A(r){return v({url:"/api/teacher/edit",method:"post",data:r})}const F=e("br",null,null,-1),z={border:"1"},M=e("tr",null,[e("th",null,"id"),e("th",null,"school"),e("th",null,"depart"),e("th",null,"teacherNo"),e("th",null,"teacherName"),e("th",null,"professional"),e("th",null,"createTime"),e("th",null,"updateTime"),e("th",null,"操作")],-1),j=["onClick"],G=["onClick"],H=e("br",null,null,-1),J=e("td",null,"id:",-1),K=e("td",null,"school:",-1),P=e("td",null,"depart:",-1),Q=e("td",null,"teacherNo:",-1),R=e("td",null,"teacherName:",-1),W=e("td",null,"professional:",-1),X={colspan:"2"},Z={__name:"teacher",setup(r){const b=D(),p=m(!1),h=m({email:"414090297@qq.com",password:"12345678"}),T=m([]),a=m({createTime:"",depart:"",id:0,professional:"",school:"",teacherName:"",teacherNo:"",updateTime:"",userId:2}),o=m({}),x=()=>{let u=h.value;B(u).then(t=>{if(t.code==1){let l=t.data.userinfo.token;b.setToken(l),p.value=!0,c()}else alert("登录失败，请检查账号或密码输入是否有误。")})},V=()=>{confirm("是否要退出登录？")&&(b.setToken(""),p.value=!1,alert("退出登录成功。"))},g=()=>{let u={createTime:new Date,depart:a.value.depart,id:0,professional:a.value.professional,school:a.value.school,teacherName:a.value.teacherName,teacherNo:a.value.teacherNo,updateTime:new Date,userId:2};q(u).then(t=>{t.code==1&&(alert("添加教师信息成功！"),c())})},U=u=>{L(u).then(t=>{let l=t.data.teacher;o.value=l})},w=()=>{if(confirm("是否要进行更新？"))if(o.value.id=="")alert("请选择要操作的教师信息。");else{let u={createTime:o.value.createTime,depart:o.value.depart,id:o.value.id,professional:o.value.professional,school:o.value.school,teacherName:o.value.teacherName,teacherNo:o.value.teacherNo,updateTime:new Date,userId:2};A(u).then(t=>{t.code==1&&(alert("更新成功。"),k(),c())})}},k=()=>{o.value={createTime:"",depart:"",id:"",professiona:" ",school:"",teacherName:"",teacherNo:"",updateTime:"",userId:""}},C=u=>{confirm("是否要删除该教师信息？")&&S(u).then(t=>{t.code==1&&(alert("成功删除教师信息！"),c())})};function c(){E().then(u=>{console.log(u),T.value=u.data.teachers})}return(u,t)=>(N(),y("div",null,[n(e("div",null,[s(" 账号："),n(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=l=>h.value.email=l)},null,512),[[d,h.value.email]]),s("   密码："),n(e("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=l=>h.value.password=l)},null,512),[[d,h.value.password]]),s("   "),n(e("button",{type:"button",onClick:t[2]||(t[2]=l=>x())},"登录",512),[[f,p.value==!1]])],512),[[f,p.value==!1]]),n(e("div",null,[s(" school: "),n(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=l=>a.value.school=l)},null,512),[[d,a.value.school]]),s("   depart: "),n(e("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=l=>a.value.depart=l)},null,512),[[d,a.value.depart]]),s("   teacherNo: "),n(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=l=>a.value.teacherNo=l)},null,512),[[d,a.value.teacherNo]]),s("   teacherName: "),n(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=l=>a.value.teacherName=l)},null,512),[[d,a.value.teacherName]]),s("   professional: "),n(e("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=l=>a.value.professional=l)},null,512),[[d,a.value.professional]]),s("   "),e("button",{type:"button",onClick:t[8]||(t[8]=l=>g())},"添加"),s("   "),e("button",{type:"button",onClick:t[9]||(t[9]=l=>V())},"退出登录")],512),[[f,p.value]]),F,n(e("div",null,[e("div",null,[e("table",z,[M,(N(!0),y(O,null,I(T.value,l=>(N(),y("tr",{key:l.id},[e("td",null,i(l.id),1),e("td",null,i(l.school),1),e("td",null,i(l.depart),1),e("td",null,i(l.teacherNo),1),e("td",null,i(l.teacherName),1),e("td",null,i(l.professional),1),e("td",null,i(l.createTime),1),e("td",null,i(l.updateTime),1),e("td",null,[e("button",{onClick:$=>U(l.id)},"更新",8,j),e("button",{onClick:$=>C(l.id)},"删除",8,G)])]))),128))])]),H,e("table",null,[e("tr",null,[J,e("td",null,[n(e("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=l=>o.value.id=l),readonly:""},null,512),[[d,o.value.id]])])]),e("tr",null,[K,e("td",null,[n(e("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=l=>o.value.school=l)},null,512),[[d,o.value.school]])])]),e("tr",null,[P,e("td",null,[n(e("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=l=>o.value.depart=l)},null,512),[[d,o.value.depart]])])]),e("tr",null,[Q,e("td",null,[n(e("input",{type:"text","onUpdate:modelValue":t[13]||(t[13]=l=>o.value.teacherNo=l)},null,512),[[d,o.value.teacherNo]])])]),e("tr",null,[R,e("td",null,[n(e("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=l=>o.value.teacherName=l)},null,512),[[d,o.value.teacherName]])])]),e("tr",null,[W,e("td",null,[n(e("input",{type:"text","onUpdate:modelValue":t[15]||(t[15]=l=>o.value.professional=l)},null,512),[[d,o.value.professional]])])]),e("tr",null,[e("td",X,[e("button",{type:"button",onClick:t[16]||(t[16]=l=>w())},"更新"),e("button",{type:"button",onClick:t[17]||(t[17]=l=>k())},"清空")])])])],512),[[f,p.value]])]))}};export{Z as default};
