import{aA as u,ap as w,l as k,o as C,n as T,p as h,$ as l,a0 as o,a4 as y,aw as s,av as U,at as E,ax as F,ay as I,y as g,az as $,au as z,as as L}from"./index-adc08176.js";import{c as P}from"./cloneDeep-2bffa89f.js";const W=e=>u.request({url:"api/image/add",method:"post",data:e}),v=e=>u.request({url:"api/image/delete",method:"get",params:e}),q=e=>u.request({url:"api/image/edit",method:"post",data:e}),N=e=>u.request({url:"api/image/one",method:"get",params:{id:e}}),_=e=>u.request({url:"api/image/page",method:"post",data:e}),B=k({data(){return{images:[],page:{total:0,current:1,size:10},dialogFormVisible:!1,image:{createTime:"",height:0,id:0,imgUrl:"",name:"",updateTime:"",width:0},formLabelWidth:80,searchId:""}},mounted(){this.getimagesPage(1)},methods:{toEdit(e){console.log(e),this.dialogFormVisible=!0,this.image=P(e)},getimagesPage(e){_({current:e,size:2}).then(i=>{console.log(i);const p=i.data.page;this.images=p.records,this.page=p}).catch(i=>{console.log(i)})},currentchange(e){this.getimagesPage(e),this.page.current=e},del(e){confirm("是否删除")==!0&&console.log(e),v({id:e}).then(i=>{if(i.success)this.getimagesPage(this.page.current);else return console.log(i.msg),!1}).catch(i=>{})},keep(){const e=this.image;e.id?q(e).then(a=>{a.success?(this.dialogFormVisible=!1,this.getimagesPage(this.page.current),s.success(a.msg)):s.error(a.msg)}).catch(a=>{s.error("出错了")}):W(e).then(a=>{a.success?(this.dialogFormVisible=!1,this.getimagesPage(this.page.current),s.success(a.msg)):s.error(a.msg)}).catch(a=>{s.error("出错了")})},toAdd(){this.dialogFormVisible=!0,this.image={createTime:"",height:0,id:0,imgUrl:"",name:"",updateTime:"",width:0}},searchimage(){const e=parseInt(this.searchId);if(isNaN(e)){s.warning("请输入有效的ID");return}console.log("Searching image with ID:",e),N(e).then(a=>{if(console.log("Search result:",a),a.success){const i=a.data.classinfo;this.images=[i],this.page={total:1,current:1,size:this.page.size}}else s.error(a.msg)}).catch(a=>{s.error("出错了")})}}}),D={class:"images"},A={class:"image-tools"},S={class:"dialog-footer"};function M(e,a,i,p,O,j){const r=U,d=E,m=$,f=F,n=z,c=L,b=I;return C(),T(y,null,[h("div",D,[h("div",A,[l(r,{type:"warning",onClick:e.toAdd},{default:o(()=>[g("添加")]),_:1},8,["onClick"]),l(d,{modelValue:e.searchId,"onUpdate:modelValue":a[0]||(a[0]=t=>e.searchId=t),placeholder:"通过id搜索",clearable:"",style:{width:"160px"}},null,8,["modelValue"]),l(r,{type:"primary",onClick:e.searchimage},{default:o(()=>[g("搜索")]),_:1},8,["onClick"])]),l(f,{data:e.images,style:{width:"100%"}},{default:o(()=>[l(m,{prop:"id",label:"编号",width:"100"}),l(m,{prop:"name",label:"图片名称",width:"200"}),l(m,{prop:"imgUrl",label:"图片路径",width:"200"}),l(m,{prop:"height",label:"图片高度",width:"150"}),l(m,{prop:"width",label:"图片宽度",width:"150"}),l(m,{prop:"createTime",label:"创建时间",width:"150"}),l(m,{prop:"updateTime",label:"更新时间",width:"150"}),l(m,{prop:"updateTime",label:"操作",width:"250"},{default:o(t=>[l(r,{link:"",type:"primary",size:"small",onClick:V=>e.toEdit(t.row)},{default:o(()=>[g("修改")]),_:2},1032,["onClick"]),l(r,{link:"",type:"primary",size:"small",onClick:V=>e.del(t.row.id)},{default:o(()=>[g("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),l(b,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":a[8]||(a[8]=t=>e.dialogFormVisible=t),title:"图片信息编辑"},{footer:o(()=>[h("span",S,[l(r,{onClick:a[7]||(a[7]=t=>e.dialogFormVisible=!1)},{default:o(()=>[g("取消")]),_:1}),l(r,{type:"primary",onClick:e.keep},{default:o(()=>[g("保存")]),_:1},8,["onClick"])])]),default:o(()=>[l(c,{model:e.image},{default:o(()=>[l(n,{label:"图片名称","label-width":e.formLabelWidth},{default:o(()=>[l(d,{modelValue:e.image.name,"onUpdate:modelValue":a[1]||(a[1]=t=>e.image.name=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"图片路径","label-width":e.formLabelWidth},{default:o(()=>[l(d,{modelValue:e.image.imgUrl,"onUpdate:modelValue":a[2]||(a[2]=t=>e.image.imgUrl=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"图片高度","label-width":e.formLabelWidth},{default:o(()=>[l(d,{modelValue:e.image.height,"onUpdate:modelValue":a[3]||(a[3]=t=>e.image.height=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"图片宽度","label-width":e.formLabelWidth},{default:o(()=>[l(d,{modelValue:e.image.width,"onUpdate:modelValue":a[4]||(a[4]=t=>e.image.width=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"创建时间","label-width":e.formLabelWidth},{default:o(()=>[l(d,{modelValue:e.image.createTime,"onUpdate:modelValue":a[5]||(a[5]=t=>e.image.createTime=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"更新时间","label-width":e.formLabelWidth},{default:o(()=>[l(d,{modelValue:e.image.updateTime,"onUpdate:modelValue":a[6]||(a[6]=t=>e.image.updateTime=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const J=w(B,[["render",M]]);export{J as default};
